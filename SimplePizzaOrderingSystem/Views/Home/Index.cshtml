<html>
<head>
    
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <style>
        table, th, td {
            border: 1px solid grey;
            border-collapse: collapse;
            padding: 10px;
        }

            td img {
                display: block;
                margin-left: auto;
                margin-right: auto;
            }

        .offer {
            text-decoration: line-through;
        }
    </style>
</head>
<body>
    <h2>Pizza Menu</h2>
    <div ng-app="mainApp" ng-controller="orderController">
        <div style="float:left;">
            <table border="0" class="table_">
                <tr>
                    <td>
                        Select Quantity
                    </td>
                    <td colspan="2">
                        <select name="qty" ng-model="mdlQty">
                            <option ng-repeat="option in qtyList" value="{{option.id}}">{{option.name}}</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td align="center">Pizza Sizes</td>
                    <td colspan="2">
                        <input type="radio" name="pizzasize" value="small" ng-model="selectVal" /> Small<br />
                        <input type="radio" name="pizzasize" value="medium" ng-model="selectVal" /> Medium<br />
                        <input type="radio" name="pizzasize" value="large" ng-model="selectVal" /> Large<br />
                        <input type="radio" name="pizzasize" value="extraLarge" ng-model="selectVal" /> Extra Large<br />
                    </td>
                </tr>
                <tr>
                    <td align="center">Toppings</td>
                    <td><label>Veg Options</label></td>
                    <td><label>Non Veg Options</label></td>
                </tr>
                <tr>
                    <td> </td>
                    <td>
                        <div ng-repeat="option in vegOptions">
                            <input type="checkbox" ng-model="option.checked" name="veg" ng-value="option.Price" />
                            {{ option.Name }}
                        </div>
                    </td>
                    <td>
                        <div ng-repeat="option in nonVegOptions">
                            <input type="checkbox" ng-model="option.checked" name="nonveg" ng-value="option.Price" />
                            {{ option.Name }}
                        </div>
                    </td>
                </tr>

                <tr>
                    <td colspan="3" align="center">
                        <button ng-click="submit()">Add</button>

                        <button ng-click="reset()">Reset</button>
                    </td>
                </tr>
            </table>
            <div>
                <span ng-show="isChooseTopping" style="color:red;">Choose Toppings to Add.</span>
            </div>
        </div>
        <div style="float:right;width:60%">
            <table>
                <tr>
                    <td rowspan="2" align="center">
                        <label> Toppings</label>
                    </td>
                    <td colspan="4" align="center"><label> Pizza Size</label></td>
                </tr>
                <tr>
                    <td><label>Small($5)</label></td>
                    <td><label>Medium($7)</label></td>
                    <td><label>Large($8)</label></td>
                    <td><label>Extra Large($9)</label></td>
                </tr>
                <tr>
                    <td colspan="5"><label>Veg Toppings</label></td>
                </tr>
                <tr>
                    <td>Tomatoes ($1.00)</td>
                    <td>
                        <img ng-show="tomatoesS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="tomatoesM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="tomatoesL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="tomatoesXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td>Onions ($0.50)</td>
                    <td>
                        <img ng-show="onionsS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="onionsM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="onionsL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="onionsXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td>Bell Pepper($1.00)</td>
                    <td>
                        <img ng-show="bellpepperS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="bellpepperM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="bellpepperL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="bellpepperXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td>Mushrooms ($1.20)</td>
                    <td>
                        <img ng-show="mushroomsS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="mushroomsM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="mushroomsL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="mushroomsXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td>Pineapple ($0.75)</td>
                    <td>
                        <img ng-show="pineappleS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="pineappleM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="pineappleL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="pineappleXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td colspan="5"><label>Non Veg Toppings</label></td>
                </tr>
                <tr>
                    <td>Sausage ($1.00)</td>
                    <td>
                        <img ng-show="sausageS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="sausageM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="sausageL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="sausageXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td>Pepperoni ($2.00)</td>
                    <td>
                        <img ng-show="pepperoniS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="pepperoniM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="pepperoniL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="pepperoniXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td>Barbecue Chicken ($3.00)</td>
                    <td>
                        <img ng-show="barbecueS" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="barbecueM" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="barbecueL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                    <td>
                        <img ng-show="barbecueXL" src="~/Images/selected.png" height="20" width="20" />
                    </td>
                </tr>
                <tr>
                    <td colspan="5" style="background-color:#f2f2f2;">
                        <label>
                            Total
                        </label>
                    </td>
                </tr>
                <tr>
                    <td><label>Offer</label></td>
                    <td></td>
                    <td>
                        <div ng-show="isMediumOffer" ng-bind="offermid"> </div>
                    </td>
                    <td>
                        <div ng-show="isLargeOffer">Offer 3-<img src="~/Images/selected.png" height="20" width="20" /></div>
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <span ng-show="isSmall">${{smallAmt}}</span>
                    </td>
                    <td>
                        <div ng-show="isMedium" ng-class="(isMediumOffer) ? 'offer' : ''">${{mediumAmt}}</div>
                        <div ng-show="isMediumOffer">${{mediumOfferAmt}}</div>
                    </td>
                    <td>
                        <div ng-show="isLarge" ng-class="(isLargeOffer) ? 'offer' : ''">${{largeAmt}}</div>
                        <div ng-show="isLargeOffer">${{largeOfferAmt}}</div>
                    </td>
                    <td>
                        <span ng-show="isExtraLarge">${{extraLargeAmt}}</span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>

<script>
    var mainApp = angular.module("mainApp", []);

    mainApp.controller('orderController', function ($scope) {
        $scope.reset = function () {
            $scope.qtyList = [
                { id: 1, name: 1 },
                { id: 2, name: 2 },
                { id: 3, name: 3 },
                { id: 4, name: 4 },
                { id: 5, name: 5 }
            ];
            $scope.mdlQty = "1";

            $scope.isChooseTopping = false;
            $scope.selectVal = "medium";
            $scope.pizzaSizes = [{
                'id': 'small',
                'Name': 'Small',
                'Price': 5,
                'checked': true
            },
            {
                'id': 'medium',
                'Name': 'Medium',
                'Price': 7
            },
            {
                'id': 'large',
                'Name': 'Large',
                'Price': 8
            },
            {
                'id': 'extraLarge',
                'Name': 'Extra Large',
                'Price': 9
            }
            ];

            $scope.vegOptions = [{
                id: 'tomatoes',
                Name: 'Tomatoes',
                Price: 1,
                checked: false
            },
            {
                'id': 'onions',
                'Name': 'Onions',
                'Price': 0.50,
                'checked': false
            },
            {
                'id': 'bellpepper',
                'Name': 'Bell Pepper',
                'Price': 1,
                'checked': false
            },
            {
                'id': 'mushrooms',
                'Name': 'Mushrooms',
                'Price': 1.20,
                'checked': false
            },
            {
                'id': 'pineapple',
                'Name': 'Pineapple',
                'Price': 0.75,
                'checked': false
            }
            ];

            $scope.nonVegOptions = [{
                'id': 'sausage',
                'Name': 'Sausage',
                'Price': 1
            },
            {
                'id': 'pepperoni',
                'Name': 'Pepperoni',
                'Price': 2
            },
            {
                'id': 'barbecue',
                'Name': 'Barbecue Chicken',
                'Price': 3
            }
            ];

            $scope.tomatoesS = false;
            $scope.tomatoesM = false;
            $scope.tomatoesL = false;
            $scope.tomatoesXL = false;

            $scope.onionsS = false;
            $scope.onionsM = false;
            $scope.onionsL = false;
            $scope.onionsXL = false;

            $scope.bellpepperS = false;
            $scope.bellpepperM = false;
            $scope.bellpepperL = false;
            $scope.bellpepperXL = false;

            $scope.mushroomsS = false;
            $scope.mushroomsM = false;
            $scope.mushroomsL = false;
            $scope.mushroomsXL = false;

            $scope.pineappleS = false;
            $scope.pineappleM = false;
            $scope.pineappleL = false;
            $scope.pineappleXL = false;

            $scope.sausageS = false;
            $scope.sausageM = false;
            $scope.sausageL = false;
            $scope.sausageXL = false;

            $scope.pepperoniS = false;
            $scope.pepperoniM = false;
            $scope.pepperoniL = false;
            $scope.pepperoniXL = false;

            $scope.barbecueS = false;
            $scope.barbecueM = false;
            $scope.barbecueL = false;
            $scope.barbecueXL = false;

            $scope.isSmall = false;
            $scope.isMedium = false;
            $scope.isMediumOffer = false;
            $scope.isLarge = false;
            $scope.isLargeOffer = false;
            $scope.isExtraLarge = false;
        }
        $scope.reset();

        var mediumOffer, largeOffer;
        $scope.submit = function (data) {
            var pizzaSize = $scope.pizzaSizes.filter(f => f.id == $scope.selectVal)[0];
            switch (pizzaSize.id) {
                case "small":
                    $scope.smallAmt = pizzaSize.Price;
                    $scope.tomatoesS = false;
                    $scope.onionsS = false;
                    $scope.bellpepperS = false;
                    $scope.mushroomsS = false;
                    $scope.pineappleS = false;
                    $scope.sausageS = false;
                    $scope.pepperoniS = false;
                    $scope.barbecueS = false;
                    break;
                case "medium":
                    $scope.isMediumOffer = false;
                    mediumOffer = 0;
                    $scope.mediumAmt = pizzaSize.Price;
                    $scope.tomatoesM = false;
                    $scope.onionsM = false;
                    $scope.bellpepperM = false;
                    $scope.mushroomsM = false;
                    $scope.pineappleM = false;
                    $scope.sausageM = false;
                    $scope.pepperoniM = false;
                    $scope.barbecueM = false;
                    break;
                case "large":
                    $scope.isLargeOffer = false;
                    largeOffer = 0;
                    $scope.largeAmt = pizzaSize.Price;
                    $scope.tomatoesL = false;
                    $scope.onionsL = false;
                    $scope.bellpepperL = false;
                    $scope.mushroomsL = false;
                    $scope.pineappleL = false;
                    $scope.sausageL = false;
                    $scope.pepperoniL = false;
                    $scope.barbecueL = false;
                    break;
                case "extraLarge":
                    $scope.extraLargeAmt = pizzaSize.Price;
                    $scope.tomatoesXL = false;
                    $scope.onionsXL = false;
                    $scope.bellpepperXL = false;
                    $scope.mushroomsXL = false;
                    $scope.pineappleXL = false;
                    $scope.sausageXL = false;
                    $scope.pepperoniXL = false;
                    $scope.barbecueXL = false;
                    break;
            }

            var checkedVegOption = $scope.vegOptions.filter(f => f.checked == true);
            angular.forEach(checkedVegOption, function (value, key) {
                if (value.id == "tomatoes") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.tomatoesS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.tomatoesM = true;
                            break;
                        case "large":
                            largeOffer++;
                            $scope.largeAmt += value.Price;
                            $scope.tomatoesL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.tomatoesXL = true;
                            break;
                    }
                }
                else if (value.id == "onions") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.onionsS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.onionsM = true;
                            break;
                        case "large":
                            largeOffer++;
                            $scope.largeAmt += value.Price;
                            $scope.onionsL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.onionsXL = true;
                            break;
                    }
                }
                else if (value.id == "bellpepper") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.bellpepperS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.bellpepperM = true;
                            break;
                        case "large":
                            largeOffer++;
                            $scope.largeAmt += value.Price;
                            $scope.bellpepperL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.bellpepperXL = true;
                            break;
                    }
                }
                else if (value.id == "mushrooms") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.mushroomsS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.mushroomsM = true;
                            break;
                        case "large":
                            largeOffer++;
                            $scope.largeAmt += value.Price;
                            $scope.mushroomsL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.mushroomsXL = true;
                            break;
                    }
                }
                else if (value.id == "pineapple") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.pineappleS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.pineappleM = true;
                            break;
                        case "large":
                            largeOffer++;
                            $scope.largeAmt += value.Price;
                            $scope.pineappleL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.pineappleXL = true;
                            break;
                    }
                }
            });

            var checkedNonVegOption = $scope.nonVegOptions.filter(f => f.checked == true);
            angular.forEach(checkedNonVegOption, function (value, key) {
                if (value.id == "sausage") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.sausageS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.sausageM = true;
                            break;
                        case "large":
                            largeOffer++;
                            $scope.largeAmt += value.Price;
                            $scope.sausageL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.sausageXL = true;
                            break;
                    }
                }
                else if (value.id == "pepperoni") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.pepperoniS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.pepperoniM = true;
                            break;
                        case "large":
                            largeOffer = largeOffer + 2;
                            $scope.largeAmt += value.Price;
                            $scope.pepperoniL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.pepperoniXL = true;
                            break;
                    }
                }
                else if (value.id == "barbecue") {
                    switch (pizzaSize.id) {
                        case "small":
                            $scope.smallAmt += value.Price;
                            $scope.barbecueS = true;
                            break;
                        case "medium":
                            mediumOffer++;
                            $scope.mediumAmt += value.Price;
                            $scope.barbecueM = true;
                            break;
                        case "large":
                            largeOffer = largeOffer + 2;
                            $scope.largeAmt += value.Price;
                            $scope.barbecueL = true;
                            break;
                        case "extraLarge":
                            $scope.extraLargeAmt += value.Price;
                            $scope.barbecueXL = true;
                            break;
                    }
                }
            });

            if (checkedVegOption.length == 0 && checkedNonVegOption.length == 0) {
                $scope.isChooseTopping = true;
            }
            else {
                //Calculate Offer with Quantity
                switch (pizzaSize.id) {
                    case "small":
                        $scope.isSmall = true;
                        $scope.smallAmt = ($scope.smallAmt * parseInt($scope.mdlQty)).toFixed(2);
                        break;
                    case "medium":
                        $scope.mediumAmt = ($scope.mediumAmt * parseInt($scope.mdlQty)).toFixed(2);
                        $scope.isMedium = true;
                        if (mediumOffer == 2) {
                            $scope.offermid = "Offer 1";
                            $scope.isMediumOffer = true;
                            $scope.mediumOfferAmt = (5 * parseInt($scope.mdlQty)).toFixed(2);
                        }

                        if (parseInt($scope.mdlQty) == 2 && mediumOffer == 4) {
                            $scope.offermid = "Offer 2";
                            $scope.isMediumOffer = true;
                            $scope.mediumOfferAmt = (9).toFixed(2);
                        }
                        break;
                    case "large":
                        $scope.isLarge = true;
                        $scope.largeAmt = ($scope.largeAmt * parseInt($scope.mdlQty)).toFixed(2);
                        if (largeOffer >= 4) {
                            $scope.isLargeOffer = true;
                            $scope.largeOfferAmt = ($scope.largeAmt / 2).toFixed(2);
                        }
                        break;
                    case "extraLarge":
                        $scope.isExtraLarge = true;
                        $scope.extrlargeAmt = ($scope.extrlargeAmt * parseInt($scope.mdlQty)).toFixed(2);
                        break;
                }
                $scope.isChooseTopping = false;
            }
        };
    });
</script>